<div class="admin-panel">
  <header>
    <h1>HR Dashboard</h1>
    <button (click)="logout()" class="logout-btn">Logout</button>
  </header>

  <div class="stats-row">
    <div class="card stat">
      <h2>{{ pendingCount }}</h2>
      <span>Pending Requests</span>
    </div>
    <div class="card stat">
      <h2>{{ totalRequests }}</h2>
      <span>Total Processed</span>
    </div>
  </div>

  <div class="card request-list">
    <h3>Inbox: Employee Requests</h3>

    <div *ngIf="requests.length === 0" class="empty-state">
      No pending requests.
    </div>

    <table *ngIf="requests.length > 0">
      <thead>
        <tr>
          <th>Employee</th>
          <th>Type</th>
          <th>Dates</th>
          <th>Reason</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of requests">
          <td><strong>{{ r.userName }}</strong></td>
          <td>{{ r.type }}</td>
          <td>
            {{ r.startDate }} <br />
            <small>to {{ r.endDate }}</small>
          </td>
          <td>{{ r.reason }}</td>
          <td>
            <span [class]="'badge ' + r.status.toLowerCase()">
              {{ r.status }}
            </span>
          </td>
          <td>
            <div *ngIf="r.status === 'PENDING'">
              <button
                (click)="action(r.id, 'APPROVED')"
                class="btn-approve">
                Approve
              </button>
              <button
                (click)="action(r.id, 'REJECTED')"
                class="btn-reject">
                Reject
              </button>
            </div>
            <div *ngIf="r.status !== 'PENDING'">
              Done
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
